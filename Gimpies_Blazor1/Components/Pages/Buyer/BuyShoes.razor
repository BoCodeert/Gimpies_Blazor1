@page "/buyShoes"

@using Gimpies_Blazor1.Database.Data
@using Gimpies_Blazor1.Database.Models.Entities
@using Microsoft.EntityFrameworkCore
@inject ApplicationDbContext DbContext
@inject NavigationManager Navigation
@inject IDialogService DialogService
@rendermode InteractiveServer


<PageTitle>Schoenenoverzicht</PageTitle>


<AuthorizeView Policy="@UserPolicy.View_Shoes">
    <ChildContent>
        @if (shoes == null)
        {
            <p>Het overzicht wordt geladen...</p>
        }

        else if (shoes.Count == 0)
        {
            <p>Er zijn geen schoenen beschikbaar</p>
        }
        else
        {
            <table class=" table">
                <thead>
                    <tr>
                        <th>Merk</th>
                        <th>Model</th>
                        <th>Kleur</th>
                        <th>Maat</th>
                        <th>Prijs</th>
                        <th>Aantal</th>
                        <AuthorizeView Policy="@UserPolicy.Buy_Shoes">
                            <ChildContent Context="BuyShoesContext">
                                <th></th>
                            </ChildContent>
                        </AuthorizeView>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var shoe in shoes)
                    {
                        <tr class="@GetRowClass(shoe.Unit)">
                            <td>@shoe.Brand.BrandName</td>
                            <td>@shoe.Model.ModelName</td>
                            <td>@shoe.Colour.ColourName</td>
                            <td>@shoe.Size.SizeValue</td>
                            <td>€@shoe.Value</td>
                            <td>@shoe.Unit</td>
                            <AuthorizeView Policy="@UserPolicy.Buy_Shoes">
                                <ChildContent Context="BuyShoesContext">
                                    <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="() => OpenBuyShoesDialog(shoe)">
                                        Inkopen
                                    </MudButton>
                                </ChildContent>
                            </AuthorizeView>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </ChildContent>
</AuthorizeView>


